import{useStores as e,useItems as t,defineInterface as n}from"@directus/extensions-sdk";import{computed as l,defineComponent as i,resolveComponent as r,openBlock as o,createBlock as a,unref as s,isRef as u}from"vue";var d=i({__name:"interface",props:{collection:{type:String,required:!0},field:{type:String,required:!0},value:{type:Object,default:null}},emits:["input"],setup(n,{emit:i}){const d=n,c=e=>typeof e==typeof Number(),p=((t,n)=>{const l=e(),i=l.useRelationsStore();return l.useCollectionsStore().getCollection(i.getRelationForField(t,n).related_collection)})(d.collection,d.field),m=p.meta.singleton,f=m?1:d.value,v=c(f)?(g=p.collection,b=Number(f),t(l((()=>g)),{filter:l((()=>({id:{_eq:b}}))),fields:l((()=>["*"])),limit:l((()=>1)),page:l((()=>null)),sort:l((()=>null)),search:l((()=>null))})):null;var g,b;const y=l(v?()=>m?v.items.value:v.items.value[0]:()=>({})),h=v?v.loading:l((()=>!1)),_=l({get:()=>c(d.value)||m&&!d.value?{id:f}:d.value,set:e=>{Object.keys(e).filter((e=>"id"!==e)).length?i("input",e):i("input",f)}});return(e,t)=>{const n=r("v-form");return o(),a(n,{class:"form-inline",collection:s(p).collection,"initial-values":s(y),loading:s(h),modelValue:s(_),"onUpdate:modelValue":t[0]||(t[0]=e=>u(_)?_.value=e:null)},null,8,["collection","initial-values","loading","modelValue"])}}}),c=[],p=[];!function(e,t){if(e&&"undefined"!=typeof document){var n,l=!0===t.prepend?"prepend":"append",i=!0===t.singleTag,r="string"==typeof t.container?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(i){var o=c.indexOf(r);-1===o&&(o=c.push(r)-1,p[o]={}),n=p[o]&&p[o][l]?p[o][l]:p[o][l]=a()}else n=a();65279===e.charCodeAt(0)&&(e=e.substring(1)),n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(document.createTextNode(e))}function a(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),t.attributes)for(var n=Object.keys(t.attributes),i=0;i<n.length;i++)e.setAttribute(n[i],t.attributes[n[i]]);var o="prepend"===l?"afterbegin":"beforeend";return r.insertAdjacentElement(o,e),e}}("\n.form-inline[data-v-64969d30] {\n\tborder: var(--border-width) solid var(--border-normal);\n\tborder-radius: var(--border-radius);\n\tpadding: var(--form-horizontal-gap) var(--form-vertical-gap);\n}\n",{}),d.__scopeId="data-v-64969d30",d.__file="src/interface.vue";var m=n({id:"directus-extension-1to1-interface",name:"One to One Inline",icon:"list_alt",description:"Displays a one to one relationship inline as a subform.",component:d,options:null,group:"relational",relational:!0,types:["alias"],localTypes:["m2o"]});export{m as default};
